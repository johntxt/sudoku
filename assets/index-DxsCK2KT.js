(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const Ie="modulepreload",ze=function(e){return"/sudoku/"+e},de={},Te=function(t,n,o){let s=Promise.resolve();if(n&&n.length>0){let p=function(i){return Promise.all(i.map(r=>Promise.resolve(r).then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))};var m=p;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=p(n.map(i=>{if(i=ze(i),i in de)return;de[i]=!0;const r=i.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":Ie,r||(c.as="script"),c.crossOrigin="",c.href=i,f&&c.setAttribute("nonce",f),document.head.appendChild(c),r)return new Promise((g,d)=>{c.addEventListener("load",g),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})};function Oe(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:o,onRegistered:s,onRegisteredSW:l,onRegisterError:m}=e;let u,f;const p=async(r=!0)=>{await f};async function i(){if("serviceWorker"in navigator){if(u=await Te(async()=>{const{Workbox:r}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:r}},[]).then(({Workbox:r})=>new r("/sudoku/sw.js",{scope:"/sudoku/",type:"classic"})).catch(r=>{m?.(r)}),!u)return;u.addEventListener("activated",r=>{(r.isUpdate||r.isExternal)&&window.location.reload()}),u.addEventListener("installed",r=>{r.isUpdate||o?.()}),u.register({immediate:t}).then(r=>{l?l("/sudoku/sw.js",r):s?.(r)}).catch(r=>{m?.(r)})}}return f=i(),p}const Y=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},_e=511,_=e=>1<<e-1,Re=e=>e!==0&&(e&e-1)===0,Ve=e=>Math.log2(e)+1,R=e=>{let t=0,n=e;for(;n;)n&=n-1,t+=1;return t},L=[];for(let e=0;e<9;e++){const t=[],n=[];for(let o=0;o<9;o++)t.push(e*9+o),n.push(o*9+e);L.push(t,n)}for(let e=0;e<3;e++)for(let t=0;t<3;t++){const n=[];for(let o=0;o<3;o++)for(let s=0;s<3;s++)n.push((e*3+o)*9+t*3+s);L.push(n)}const W=Array.from({length:81},()=>new Set);for(const e of L)for(const t of e)for(const n of e)t!==n&&W[t].add(n);const xe=(e,t)=>{if(e[t]!==0)return 0;let n=0;for(const o of W[t]){const s=e[o];s&&(n|=_(s))}return _e&~n},Le=e=>{const t=[];for(let n=1;n<=9;n++)e&_(n)&&t.push(n);return t},De=e=>{const t=e.slice(),n=()=>{let s=-1,l=null;for(let m=0;m<81;m++)if(t[m]===0){const u=xe(t,m),f=R(u);if(f===0)return{idx:m,cand:[]};if((!l||f<l.count)&&(l={mask:u,count:f},s=m,f===1))break}return{idx:s,cand:l}},o=()=>{const{idx:s,cand:l}=n();if(s===-1)return!0;if(!l||l.count===0)return!1;const m=Y(Le(l.mask));for(const u of m){if(t[s]=u,o())return!0;t[s]=0}return!1};return o()?t:null},Ke=(e,t=2)=>{const n=e.slice();let o=0;const s=()=>{let m=-1,u=null;for(let f=0;f<81;f++)if(n[f]===0){const p=xe(n,f),i=R(p);if(i===0)return{idx:f,cand:[]};if((!u||i<u.count)&&(u={mask:p,count:i},m=f,i===1))break}return{idx:m,cand:u}},l=()=>{if(o>=t)return;const{idx:m,cand:u}=s();if(m===-1){o++;return}if(!u||u.count===0)return;const f=Le(u.mask);for(const p of f)if(n[m]=p,l(),n[m]=0,o>=t)return};return l(),o},me=()=>De(Array(81).fill(0)),N=e=>e.map(t=>String(t)).join(""),Ue=e=>{const t=Array(81).fill(0);for(let n=0;n<81;n++){if(e[n]!==0)continue;let o=0;for(const l of W[n]){const m=e[l];m&&(o|=_(m))}const s=_e&~o;t[n]=s}return t},je=e=>{const t=e.slice(),n=Ue(t),o={nakedSingles:0,hiddenSingles:0,lockedElims:0,nakedPairs:0,hiddenPairs:0,nakedTriples:0,hiddenTriples:0},s=(u,f)=>{t[u]=f,n[u]=0;for(const p of W[u])t[p]===0&&(n[p]&=~_(f))};for(;;){let u=!1;for(let p=0;p<81;p++){if(t[p]!==0)continue;const i=n[p];if(i===0)return{solved:!1,score:1/0,stats:o};Re(i)&&(s(p,Ve(i)),o.nakedSingles+=1,u=!0)}if(u)continue;for(const p of L){for(let i=1;i<=9;i++){const r=_(i);let a=0,c=-1;for(const g of p)if(t[g]===0&&n[g]&r&&(a+=1,c=g,a>1))break;if(a===1){s(c,i),o.hiddenSingles+=1,u=!0;break}}if(u)break}if(u)continue;let f=!1;for(let p=0;p<9;p++){const i=Math.floor(p/3)*3,r=p%3*3,a=[];for(let c=0;c<3;c++)for(let g=0;g<3;g++)a.push((i+c)*9+r+g);for(let c=1;c<=9;c++){const g=_(c),d=a.filter(b=>t[b]===0&&n[b]&g);if(d.length<2)continue;const y=new Set(d.map(b=>Math.floor(b/9)));if(y.size===1){const b=y.values().next().value;for(const h of L[b])!a.includes(h)&&t[h]===0&&n[h]&g&&(n[h]&=~g,f=!0)}const E=new Set(d.map(b=>b%9));if(E.size===1){const b=E.values().next().value;for(const h of L[9+b])!a.includes(h)&&t[h]===0&&n[h]&g&&(n[h]&=~g,f=!0)}}}for(let p=0;p<9;p++){const i=L[p];for(let r=1;r<=9;r++){const a=_(r),c=i.filter(d=>t[d]===0&&n[d]&a);if(c.length<2)continue;const g=new Set(c.map(d=>Math.floor(d/27)*3+Math.floor(d%9/3)));if(g.size===1){const d=g.values().next().value,y=Math.floor(d/3)*3,E=d%3*3;for(let b=0;b<3;b++)for(let h=0;h<3;h++){const x=(y+b)*9+E+h;!i.includes(x)&&t[x]===0&&n[x]&a&&(n[x]&=~a,f=!0)}}}}for(let p=0;p<9;p++){const i=L[9+p];for(let r=1;r<=9;r++){const a=_(r),c=i.filter(d=>t[d]===0&&n[d]&a);if(c.length<2)continue;const g=new Set(c.map(d=>Math.floor(d/27)*3+Math.floor(d%9/3)));if(g.size===1){const d=g.values().next().value,y=Math.floor(d/3)*3,E=d%3*3;for(let b=0;b<3;b++)for(let h=0;h<3;h++){const x=(y+b)*9+E+h;!i.includes(x)&&t[x]===0&&n[x]&a&&(n[x]&=~a,f=!0)}}}}if(f){o.lockedElims+=1;continue}f=!1;for(const p of L){const i=new Map;for(const r of p){if(t[r]!==0)continue;const a=n[r];if(a===0)return{solved:!1,score:1/0,stats:o};if(R(a)===2){const c=i.get(a)||[];c.push(r),i.set(a,c)}}for(const[r,a]of i.entries())if(a.length===2)for(const c of p)t[c]!==0||a.includes(c)||n[c]&r&&(n[c]&=~r,f=!0)}if(f){o.nakedPairs+=1;continue}f=!1;for(const p of L){const i=Array.from({length:10},()=>[]);for(const r of p){if(t[r]!==0)continue;const a=n[r];for(let c=1;c<=9;c++)a&_(c)&&i[c].push(r)}for(let r=1;r<=8;r++)if(i[r].length===2)for(let a=r+1;a<=9;a++){if(i[a].length!==2)continue;const c=i[r],g=i[a];if(c[0]!==g[0]||c[1]!==g[1])continue;const d=_(r)|_(a);for(const y of c){const E=n[y]&d;E!==n[y]&&(n[y]=E,f=!0)}}}if(f){o.hiddenPairs+=1;continue}f=!1;for(const p of L){const i=[];for(const r of p){if(t[r]!==0)continue;const a=n[r],c=R(a);c>=2&&c<=3&&i.push({idx:r,mask:a})}for(let r=0;r<i.length-2;r++)for(let a=r+1;a<i.length-1;a++)for(let c=a+1;c<i.length;c++){const g=i[r].mask|i[a].mask|i[c].mask;if(R(g)===3)for(const d of p)t[d]===0&&(d===i[r].idx||d===i[a].idx||d===i[c].idx||n[d]&g&&(n[d]&=~g,f=!0))}}if(f){o.nakedTriples+=1;continue}f=!1;for(const p of L){const i=Array.from({length:10},()=>[]);for(const r of p){if(t[r]!==0)continue;const a=n[r];for(let c=1;c<=9;c++)a&_(c)&&i[c].push(r)}for(let r=1;r<=7;r++)if(i[r].length!==0){for(let a=r+1;a<=8;a++)if(i[a].length!==0)for(let c=a+1;c<=9;c++){if(i[c].length===0)continue;const g=new Set([...i[r],...i[a],...i[c]]);if(g.size!==3)continue;const d=_(r)|_(a)|_(c);for(const y of g){if(t[y]!==0)continue;const E=n[y]&d;E!==n[y]&&(n[y]=E,f=!0)}}}}if(f){o.hiddenTriples+=1;continue}break}const l=t.every(u=>u!==0),m=o.nakedSingles*1+o.hiddenSingles*3+o.lockedElims*2+o.nakedPairs*8+o.hiddenPairs*5+o.nakedTriples*6+o.hiddenTriples*7;return{solved:l,score:m,stats:o}},We=({scoreMin:e=0,scoreMax:t=1/0,symmetric:n=!0,maxAttempts:o=50}={})=>{let s=null,l=null;const m=Number.isFinite(o);for(let f=0;f<o;f++){const p=me();if(!p)throw new Error("Failed to generate solution");const i=p.slice(),r=Array.from({length:81},(d,y)=>y);Y(r);let a=81;const c=new Set,g=[];for(const d of r){if(c.has(d))continue;if(!n){c.add(d),g.push([d]);continue}const y=80-d;c.add(d),c.add(y),g.push(d===y?[d]:[d,y])}Y(g);for(const d of g){const y=d.filter(h=>i[h]!==0).length;if(y===0)continue;const E=d.map(h=>i[h]);for(const h of d)i[h]=0;if(Ke(i,2)!==1){for(let h=0;h<d.length;h++)i[d[h]]=E[h];continue}a-=y;const b=je(i);if(b.solved){if(b.score>=e&&b.score<=t&&(!l||b.score>l.score||b.score===l.score&&a<l.clues)&&(l={score:b.score,clues:a,givens:N(i),solution:N(p)},!m))return{givens:l.givens,solution:l.solution};const h=b.score<e?e-b.score:b.score-t;(!s||h<s.diff)&&(s={diff:h,givens:N(i),solution:N(p)})}}}if(l)return{givens:l.givens,solution:l.solution};if(s)return{givens:s.givens,solution:s.solution};const u=me();return{givens:N(u),solution:N(u)}},re="sudoku_v1",G=document.getElementById("board"),pe=document.getElementById("pad"),He=document.getElementById("padContainer"),$=document.getElementById("boardWrap"),ie=document.getElementById("newPuzzle"),le=document.getElementById("resetPuzzle"),we=document.getElementById("themeToggle"),P=document.getElementById("difficultyBubble"),B=document.getElementById("resetBubble"),Fe=document.getElementById("loadingOverlay"),H=Array.from(document.querySelectorAll("[data-difficulty]")),Ge=Array.from(document.querySelectorAll("[data-reset]")),J=document.getElementById("noteSwitch"),$e=document.getElementById("eraseBtn"),Q=document.getElementById("undoBtn"),X=document.getElementById("redoBtn"),ge=document.querySelectorAll("meta[name='theme-color']");let S=null,k=null,v=0,w=!1,Z="light",ee=null,te=null,A=[],M=[],D="easy";const I={cells:[],padButtons:new Map},qe=500,j={easy:{scoreMin:40,scoreMax:50,maxAttempts:3},medium:{scoreMin:50,scoreMax:80,maxAttempts:5},hard:{scoreMin:80,scoreMax:250,maxAttempts:100}},Ye=(e,t)=>e*9+t,Ae=e=>[Math.floor(e/9),e%9],ne=e=>1<<e-1,V=(e,t,n)=>Math.max(t,Math.min(n,e));function ce(e){if(Z=e==="dark"?"dark":"light",document.documentElement.setAttribute("data-theme",Z),ge.length){const t=getComputedStyle(document.documentElement).getPropertyValue("--panel").trim();t&&ge.forEach(n=>n.setAttribute("content",t))}}function Se(){return ee?.matches?"dark":(te?.matches,"light")}function he(){ce(Se())}function Je(){if(!window.matchMedia)return;ee=window.matchMedia("(prefers-color-scheme: dark)"),te=window.matchMedia("(prefers-color-scheme: light)");const e=t=>{t&&(t.addEventListener?t.addEventListener("change",he):t.addListener&&t.addListener(he))};e(ee),e(te)}function oe(e){const t=j[e]?e:"easy";D=t,H.forEach(n=>{n.classList.toggle("menu__option--active",n.dataset.difficulty===t)})}function Qe(){const t=H.find(o=>o.classList.contains("menu__option--active"))?.dataset.difficulty;return{...j[t]||j.easy,symmetric:Math.random()<.33}}function z(e){w=!!e,J.classList.toggle("pad__toggle--active",w),J.setAttribute("aria-checked",w?"true":"false"),He?.classList.toggle("pad--notes-mode",w),C()}function T(e){const t=!!e;P?.classList.toggle("menu__bubble--open",t),P?.setAttribute("aria-hidden",t?"false":"true"),ie?.setAttribute("aria-expanded",t?"true":"false")}function O(e){const t=!!e;B?.classList.toggle("menu__bubble--open",t),B?.setAttribute("aria-hidden",t?"false":"true"),le?.setAttribute("aria-expanded",t?"true":"false")}function be(e){const t=!!e;document.body.classList.toggle("app--loading",t),Fe?.setAttribute("aria-hidden",t?"false":"true"),ie.disabled=t,le.disabled=t,we.disabled=t,H.forEach(n=>{n.disabled=t})}function Xe(){return new Promise(e=>{requestAnimationFrame(()=>setTimeout(e,0))})}function Ze(e){return{entries:e.entries.map(String).join(""),notes:e.notes.slice()}}function K(){const e={puzzle:S,progress:Ze(k),history:A,redoHistory:M};localStorage.setItem(re,JSON.stringify(e))}function et(){const e=localStorage.getItem(re);if(!e)return!1;try{const t=JSON.parse(e);if(!t?.puzzle?.givens||!t?.puzzle?.solution||!t?.progress)return!1;const n=tt(t.progress);return n?(S=t.puzzle,D=ot(S.difficulty),k=n,A=Array.isArray(t.history)?t.history.map(ye).filter(Boolean):[],M=Array.isArray(t.redoHistory)?t.redoHistory.map(ye).filter(Boolean):[],!0):!1}catch{return!1}}function tt(e){const t=nt(e.entries),n=Array.isArray(e.notes)?e.notes.map(o=>Number(o)||0):null;return!t||!n||n.length!==81?null:{entries:t,notes:n}}function nt(e){return e?Array.isArray(e)?e.length!==81?null:e.map(t=>V(Number(t)||0,0,9)):typeof e=="string"&&e.length===81?e.split("").map(t=>V(Number(t)||0,0,9)):null:null}function ot(e){return j[e]?e:"easy"}function ye(e){if(!e||!Number.isInteger(e.idx)||e.idx<0||e.idx>=81)return null;const t=V(Number(e.prevEntry)||0,0,9),n=V(Number(e.nextEntry)||0,0,9),o=Number(e.prevNotes),s=Number(e.nextNotes);return!Number.isInteger(o)||!Number.isInteger(s)?null:{idx:e.idx,prevEntry:t,nextEntry:n,prevNotes:o,nextNotes:s}}function st(){G.innerHTML="",I.cells=[];for(let e=0;e<9;e++)for(let t=0;t<9;t++){const n=Ye(e,t),o=document.createElement("div");o.className="board__cell",o.dataset.idx=String(n),o.dataset.r=String(e),o.dataset.c=String(t);const s=document.createElement("div");s.className="board__value";const l=document.createElement("div");l.className="board__notes";for(let m=1;m<=9;m++){const u=document.createElement("div");u.className="board__note",u.dataset.n=String(m),u.textContent=String(m),l.appendChild(u)}o.appendChild(s),o.appendChild(l),G.appendChild(o),I.cells.push({idx:n,r:e,c:t,root:o,valueEl:s,noteEls:Array.from(l.querySelectorAll(".board__note"))})}pe.innerHTML="",I.padButtons.clear();for(let e=1;e<=9;e++){const t=document.createElement("button");t.type="button",t.className="btn btn--pad pad__button",t.dataset.n=String(e),t.textContent=String(e),t.addEventListener("click",()=>ve(e)),pe.appendChild(t),I.padButtons.set(e,t)}G.addEventListener("pointerdown",e=>{const t=e.target.closest(".board__cell");if(!t)return;const n=Number(t.dataset.idx);if(n===v){z(!w);return}Ne(n)}),J.addEventListener("click",()=>z(!w)),$e.addEventListener("click",()=>Ee()),Q.addEventListener("click",()=>ke()),X?.addEventListener("click",()=>q()),ie.addEventListener("click",e=>{e.stopPropagation(),O(!1);const t=P?.classList.contains("menu__bubble--open");T(!t)}),le?.addEventListener("click",e=>{e.stopPropagation(),T(!1);const t=B?.classList.contains("menu__bubble--open");O(!t)}),we?.addEventListener("click",()=>{ce(Z==="dark"?"light":"dark")}),H.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const n=e.dataset.difficulty;oe(n),localStorage.removeItem(re),Pe(),T(!1)})}),P?.addEventListener("click",e=>{e.stopPropagation()}),B?.addEventListener("click",e=>{e.stopPropagation()}),Ge.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),O(!1),dt()})}),window.addEventListener("keydown",e=>{if(["INPUT","TEXTAREA","SELECT"].includes(document.activeElement?.tagName))return;const t=e.key,n=navigator.userAgentData?navigator.userAgentData.platform==="macOS":/Mac|iPhone|iPad|iPod/.test(navigator.userAgent),o=t==="z"||t==="Z",s=t==="y"||t==="Y";if(o&&!e.altKey&&(n?e.metaKey:e.ctrlKey)){e.preventDefault(),e.shiftKey?q():ke();return}if(s&&!e.altKey&&!e.shiftKey&&!n&&e.ctrlKey){e.preventDefault(),q();return}if(!(e.metaKey||e.ctrlKey||e.altKey)){if(t>="1"&&t<="9"){e.preventDefault(),ve(Number(t));return}if(t==="Backspace"||t==="Delete"){e.preventDefault(),Ee();return}if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)){e.preventDefault(),ut(t);return}if(e.code==="Space"){e.preventDefault(),z(!w);return}}}),document.addEventListener("click",()=>{P?.classList.contains("menu__bubble--open")&&T(!1),B?.classList.contains("menu__bubble--open")&&O(!1)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&(P?.classList.contains("menu__bubble--open")&&T(!1),B?.classList.contains("menu__bubble--open")&&O(!1))})}function rt(e){return Number(S.givens[e])||k.entries[e]||0}function Ce(e){return Number(S.givens[e])!==0}function Me(){const e=Array(81).fill(0);for(let t=0;t<81;t++)e[t]=Number(S.givens[t])||k.entries[t]||0;return e}function it(e){const t=Array.from({length:81},()=>!1);function n(o){const s=new Map;for(const l of o){const m=e[l];m&&(s.has(m)||s.set(m,[]),s.get(m).push(l))}for(const l of s.values())if(l.length>=2)for(const m of l)t[m]=!0}for(let o=0;o<9;o++)n(Array.from({length:9},(s,l)=>o*9+l));for(let o=0;o<9;o++)n(Array.from({length:9},(s,l)=>l*9+o));for(let o=0;o<3;o++)for(let s=0;s<3;s++){const l=[];for(let m=o*3;m<o*3+3;m++)for(let u=s*3;u<s*3+3;u++)l.push(m*9+u);n(l)}return t}function lt(e){const t=Array.from({length:9},()=>new Set),n=Array.from({length:9},()=>new Set),o=Array.from({length:9},()=>new Set);for(let s=0;s<81;s++){const l=e[s];if(!l)continue;const[m,u]=Ae(s);t[m].add(l),n[u].add(l);const f=Math.floor(m/3)*3+Math.floor(u/3);o[f].add(l)}return{rowValues:t,colValues:n,boxValues:o}}function ct(){for(let e=0;e<81;e++){const t=Number(S.givens[e])||k.entries[e]||0;if(t===0||t!==Number(S.solution[e]))return!1}return!0}function at(e){const t=Me();let n=0;for(const o of t)o===e&&(n+=1);return n>=9}function C(){const e=S.givens,t=k.entries,n=k.notes,o=rt(v),s=Me(),l=Array(10).fill(0);s.forEach(i=>{i&&(l[i]+=1)});const m=it(s),{rowValues:u,colValues:f,boxValues:p}=lt(s);if($?.classList.toggle("board-shell--completed",ct()),$){const i=`COMPLETED â€¢ ${D.toUpperCase()}`;$.setAttribute("data-completed-label",i)}I.cells.forEach(i=>{const{idx:r,root:a,valueEl:c,noteEls:g,r:d,c:y}=i;a.classList.remove("board__cell--selected","board__cell--highlight","board__cell--error","board__cell--has-value","board__cell--notes-active"),c.classList.remove("board__value--given","board__value--entry"),c.textContent="",g.forEach(x=>{x.classList.remove("board__note--filled","board__note--conflict")});const E=Number(e[r]),b=t[r],h=E||b||0;if(h)a.classList.add("board__cell--has-value"),c.textContent=String(h),c.classList.add(E?"board__value--given":"board__value--entry");else{const x=n[r]|0;if(x){const ue=d,fe=y,Be=Math.floor(ue/3)*3+Math.floor(fe/3);g.forEach(F=>{const U=Number(F.dataset.n);x&ne(U)&&(F.classList.add("board__note--filled"),(u[ue].has(U)||f[fe].has(U)||p[Be].has(U))&&F.classList.add("board__note--conflict"))})}}!h&&w&&r===v&&a.classList.add("board__cell--notes-active"),r===v&&a.classList.add("board__cell--selected"),o!==0&&h===o&&a.classList.add("board__cell--highlight"),m[r]&&a.classList.add("board__cell--error")}),I.padButtons.forEach((i,r)=>{const a=l[r]>=9;i.disabled=!w&&a}),ft()}function Ne(e){v=V(e,0,80),C()}function ut(e){const[t,n]=Ae(v);let o=t,s=n;e==="ArrowUp"&&(o=(t+8)%9),e==="ArrowDown"&&(o=(t+1)%9),e==="ArrowLeft"&&(s=(n+8)%9),e==="ArrowRight"&&(s=(n+1)%9),v=o*9+s,C()}function ve(e){if(Ce(v)||!w&&at(e))return;const t=k.notes[v]|0;if(w){const l=k.entries[v]!==0?t|ne(e):t^ne(e);se(v,0,l);return}se(v,e,t)}function Ee(){if(Ce(v))return;const t=k.entries[v]!==0?k.notes[v]|0:0;se(v,0,t)}function se(e,t,n){const o=k.entries[e],s=k.notes[e]|0;o===t&&s===n||(ae(e,t,n),A.push({idx:e,prevEntry:o,prevNotes:s,nextEntry:t,nextNotes:n}),M=[],A.length>qe&&A.shift(),K(),C())}function ae(e,t,n){k.entries[e]=t,k.notes[e]=n}function ke(){const e=A.pop();e&&(ae(e.idx,e.prevEntry,e.prevNotes),M.push(e),K(),C())}function q(){const e=M.pop();e&&(ae(e.idx,e.nextEntry,e.nextNotes),A.push(e),K(),C())}function ft(){Q&&(Q.disabled=A.length===0),X&&(X.disabled=M.length===0)}async function Pe(){be(!0),await Xe();try{S={...We(Qe()),difficulty:D},k={entries:Array(81).fill(0),notes:Array(81).fill(0)},v=0,A=[],M=[],z(!1),K(),C()}finally{be(!1)}}function dt(){k={entries:Array(81).fill(0),notes:Array(81).fill(0)},A=[],M=[],v=0,z(!1),K(),C()}function mt(){Oe({immediate:!0}),Je(),ce(Se()),st(),oe("easy"),et()?(oe(D),z(!1),C()):Pe(),Ne(0)}mt();
